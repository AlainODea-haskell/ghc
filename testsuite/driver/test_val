test_metrics = { 'HEAD': [{'TEST_ENV': 'local1', 'TEST': 'T5835', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'}, {'TEST_ENV': 'local1', 'TEST': 'T12791', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'}, {'TEST_ENV': 'local1', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'peak_megabytes_allocated', 'VALUE': '18'}, {'TEST_ENV': 'local1', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'bytes allocated', 'VALUE': '16102232'}], 'HEAD~1': [{'TEST_ENV': 'local   T100   normal  max_bytes_used  12345'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local1', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local1', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local2', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local2', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local2', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local2', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local2', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}], 'HEAD~2': [{'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}, {'TEST_ENV': 'local', 'TEST': 'T1100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '11000'}, {'TEST_ENV': 'local', 'TEST': 'T1200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '12000'}, {'TEST_ENV': 'local', 'TEST': 'T1300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '13000'}, {'TEST_ENV': 'local', 'TEST': 'T1400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '14000'}, {'TEST_ENV': 'local', 'TEST': 'T1500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '15000'}, {'TEST_ENV': 'local', 'TEST': 'T1600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '16000'}, {'TEST_ENV': 'local', 'TEST': 'T1700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '17000'}, {'TEST_ENV': 'local', 'TEST': 'T1800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '18000'}, {'TEST_ENV': 'local', 'TEST': 'T1900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '19000'}, {'TEST_ENV': 'local', 'TEST': 'T2000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '20000'}, {'TEST_ENV': 'local', 'TEST': 'T2100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '21000'}, {'TEST_ENV': 'local', 'TEST': 'T2200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '22000'}, {'TEST_ENV': 'local', 'TEST': 'T2300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '23000'}, {'TEST_ENV': 'local', 'TEST': 'T2400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '24000'}, {'TEST_ENV': 'local', 'TEST': 'T2500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '25000'}] }

    This would likely be far easier if I just added a value to the dictionary...
    {
        'HEAD': [
                {'TEST_ENV': 'local', 'TEST': 'T5835', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'},
                {'TEST_ENV': 'local', 'TEST': 'T12791', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'},
                {'TEST_ENV': 'local', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'peak_megabytes_allocated', 'VALUE': '18'},
                {'TEST_ENV': 'local', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'bytes allocated', 'VALUE': '16102232'}
                {'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'},
                {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'},
                {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'},
                {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'},
                {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'},
                {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'},
                {'TEST_ENV': 'local', 'TEST': 'T1300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '13000'},
                {'TEST_ENV': 'local', 'TEST': 'T1400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '14000'},
                {'TEST_ENV': 'local', 'TEST': 'T1500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '15000'},
                {'TEST_ENV': 'local', 'TEST': 'T1600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '16000'},
                {'TEST_ENV': 'local', 'TEST': 'T1700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '17000'},
                {'TEST_ENV': 'local', 'TEST': 'T1800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '18000'},
                {'TEST_ENV': 'local', 'TEST': 'T1900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '19000'},
            ],
        'HEAD~1': [
                {'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'},
                {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'},
                {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'},
                {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'},
                {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'},
                {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'},
                {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'},
                {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'},
                {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'},
                {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}
            ], 
        'HEAD~2': [
                {'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'},
                {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'},
                {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'},
                {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'},
                {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'},
                {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'},
                {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'},
                {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'},
                {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'},
                {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'},
                {'TEST_ENV': 'local', 'TEST': 'T1100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '11000'},
                {'TEST_ENV': 'local', 'TEST': 'T1200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '12000'},
                {'TEST_ENV': 'local', 'TEST': 'T1300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '13000'},
                {'TEST_ENV': 'local', 'TEST': 'T1400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '14000'},
                {'TEST_ENV': 'local', 'TEST': 'T1500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '15000'},
                {'TEST_ENV': 'local', 'TEST': 'T1600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '16000'},
                {'TEST_ENV': 'local', 'TEST': 'T1700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '17000'},
                {'TEST_ENV': 'local', 'TEST': 'T1800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '18000'},
                {'TEST_ENV': 'local', 'TEST': 'T1900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '19000'},
                {'TEST_ENV': 'local', 'TEST': 'T2000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '20000'},
                {'TEST_ENV': 'local', 'TEST': 'T2100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '21000'},
                {'TEST_ENV': 'local', 'TEST': 'T2200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '22000'},
                {'TEST_ENV': 'local', 'TEST': 'T2300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '23000'},
                {'TEST_ENV': 'local', 'TEST': 'T2400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '24000'},
                {'TEST_ENV': 'local', 'TEST': 'T2500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '25000'}
            ]
    }
    

test_metrics = {'HEAD': [{'TEST_ENV': 'local', 'TEST': 'T5835', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'}, {'TEST_ENV': 'local', 'TEST': 'T12791', 'WAY': 'normal', 'METRIC': 'max_bytes_used', 'VALUE': '44576'}, {'TEST_ENV': 'local', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'peak_megabytes_allocated', 'VALUE': '18'}, {'TEST_ENV': 'local', 'TEST': 'T3586', 'WAY': 'normal', 'METRIC': 'bytes allocated', 'VALUE': '16102232'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local1', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local1', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local1', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local1', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local1', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local1', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local1', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local1', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local1', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local1', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}], 'HEAD~1': [{'TEST_ENV': 'local   T100   normal  max_bytes_used  12345'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local1', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local1', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local1', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local1', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local1', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local1', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local1', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local1', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local1', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local1', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}], 'HEAD~2': [{'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}, {'TEST_ENV': 'local', 'TEST': 'T1100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '11000'}, {'TEST_ENV': 'local', 'TEST': 'T1200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '12000'}, {'TEST_ENV': 'local', 'TEST': 'T1300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '13000'}, {'TEST_ENV': 'local', 'TEST': 'T1400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '14000'}, {'TEST_ENV': 'local', 'TEST': 'T1500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '15000'}, {'TEST_ENV': 'local', 'TEST': 'T1600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '16000'}, {'TEST_ENV': 'local', 'TEST': 'T1700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '17000'}, {'TEST_ENV': 'local', 'TEST': 'T1800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '18000'}, {'TEST_ENV': 'local', 'TEST': 'T1900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '19000'}, {'TEST_ENV': 'local', 'TEST': 'T2000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '20000'}, {'TEST_ENV': 'local', 'TEST': 'T2100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '21000'}, {'TEST_ENV': 'local', 'TEST': 'T2200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '22000'}, {'TEST_ENV': 'local', 'TEST': 'T2300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '23000'}, {'TEST_ENV': 'local', 'TEST': 'T2400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '24000'}, {'TEST_ENV': 'local', 'TEST': 'T2500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '25000'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local2', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local2', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local2', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local2', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local2', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local2', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local2', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local2', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local2', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local2', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}], 'HEAD~3': [{'TEST_ENV': 'local', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}, {'TEST_ENV': ''}, {'TEST_ENV': 'local1', 'TEST': 'T100', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '1000'}, {'TEST_ENV': 'local1', 'TEST': 'T200', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '2000'}, {'TEST_ENV': 'local1', 'TEST': 'T300', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '3000'}, {'TEST_ENV': 'local1', 'TEST': 'T400', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '4000'}, {'TEST_ENV': 'local1', 'TEST': 'T500', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '5000'}, {'TEST_ENV': 'local1', 'TEST': 'T600', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '6000'}, {'TEST_ENV': 'local1', 'TEST': 'T700', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '7000'}, {'TEST_ENV': 'local1', 'TEST': 'T800', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '8000'}, {'TEST_ENV': 'local1', 'TEST': 'T900', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '9000'}, {'TEST_ENV': 'local1', 'TEST': 'T1000', 'WAY': 'some_way', 'METRIC': 'some_field', 'VALUE': '10000'}]}

[q for r in test_metrics.values()  for q in r if q['TEST_ENV'] == 'local']
^-- will collapse the dictionary one level up. I don't want that.

dict(
    zip(
        list(r).append('COMMIT'),
        list(r.values().append('c1'))
        )
    )
